Technical Specification (YouTube-Only MVP)
Document Version: 1.0 Date: April 21, 2025
0. Executive Summary & Context Setting
Problem: Parents need better tools to understand potential risks their children might encounter through the content creators (channels) they follow on major video platforms like YouTube.
Proposed Solution (GuardianLens MVP): A platform enabling parents (with appropriate consent/awareness) to link their child's YouTube account and receive insights into potentially harmful or inappropriate channels the child subscribes to. Analysis focuses on the textual metadata (descriptions, titles) associated with these channels and their recent public videos.
MVP Platform Focus: YouTube only. This allows for a focused launch using official, well-documented APIs, deferring the complexities of other platforms.
Core Challenge (MVP): Efficiently utilizing the YouTube Data API within its quota limits while providing meaningful analysis. Aggressive caching and requesting quota increases are critical.
Ethical Foundation: Designed as an awareness and communication tool, not surveillance. Requires transparent consent (parental and child assent/consent based on age) and emphasizes responsible use by parents.
1. Introduction & Overview * 1.1. Project Goal: To provide parents with actionable insights into potential risks associated with the YouTube channels their children subscribe to, based on analysis of public channel and video metadata. * 1.2. Target Audience: Parents/guardians of children and teenagers (focus on ages <18) using YouTube. * 1.3. Core Functionality (MVP): Securely link a child's YouTube account via Google OAuth, fetch the list of subscribed channels, analyze public text metadata (channel descriptions, recent public video titles/descriptions) for keywords related to predefined risk categories, and present flagged channels with context on a parent dashboard. * 1.4. Disclaimer: GuardianLens analyzes publicly available text metadata and cannot access private videos, comments, or viewing history. Analysis is based on keyword matching and is not foolproof (false positives/negatives possible). YouTube API quotas and changes may impact service availability or data freshness. The tool supplements, not replaces, open communication and media literacy education. Adherence to YouTube ToS and data privacy laws (COPPA, GDPR) is paramount.
2. Goals & Non-Goals * 2.1. Goals (MVP): * Identify YouTube channels subscribed to by the child whose public metadata (descriptions, recent video titles/descriptions) contains keywords associated with high-risk categories. * Provide parents with an intuitive dashboard listing subscribed channels and highlighting potentially problematic ones with context. * Utilize official YouTube Data APIs and respect consent/permissions. * Prioritize user data security and privacy. * Maintain transparency about data sources, analysis methods, and limitations. * Comply with relevant data privacy regulations (COPPA, GDPR). * Implement efficient API usage and caching strategies. * 2.2. Non-Goals (MVP - Critical Limitations): * Supporting platforms other than YouTube. * Analyzing video/audio content directly. * Analyzing YouTube comments, Shorts content (beyond titles if they appear as videos), or live streams. * Analyzing private videos or user viewing history. * Analyzing the child's own comments or uploads. * Analyzing who follows the child. * Providing real-time alerts. (Notifications limited to scan completion / new findings summary indicator). * Guaranteeing 100% analysis accuracy. * Parent customization of risk categories or sensitivity. * Operating without necessary parental and child consent. * Using unofficial APIs or scraping techniques.
3. User Stories (MVP) * (Parent) As a parent, I want to link my child’s YouTube account (with their permission via Google Login) so I can see a risk assessment of the channels they subscribe to. * (Parent) As a parent, I want to see a list of channels my child follows on YouTube, with clear flags next to channels whose descriptions or recent video titles/descriptions mention concerning topics (like hate speech or self-harm). * (Parent) As a parent, I want to click on a flagged channel to see its name, thumbnail, subscriber count, the reason(s) it was flagged (risk category), and potentially the text snippet that triggered the flag. * (Parent) As a parent, I want a dashboard summarizing how many channels were scanned and how many were flagged since my last review. * (Parent) As a parent, if I review a flagged channel and believe it's safe, I want to easily mark it as "Not Harmful". * (Parent) As a parent, I want to easily disconnect my child's YouTube account monitoring at any time. * (Child - Consent Flow) As a teenager, when my parent asks to link my YouTube account, I want to use the standard Google Sign-In screen, understand that it will only see my subscriptions and public channel/video info (read-only), and approve this specific access.
4. Functional Requirements (MVP - YouTube Only) * FR1: [Authentication] Implement secure parent user registration and login (Email + Password + optional 2FA). OAuth providers (Google, Apple) for parent login optional. * FR2: [Child Profile Management] Allow parents to create/manage child profiles within the app (identifier/name, age for compliance). * FR3: [Account Linking - YouTube] Implement linking a child's YouTube account using Google OAuth, requesting only the https://www.googleapis.com/auth/youtube.readonly scope. Securely store refresh/access tokens. Handle OAuth consent flow transparently (see Sec V & X). * FR4: [Data Acquisition - Subscriptions] Periodically (daily target) use the linked account's OAuth token to fetch the list of subscribed channel IDs via the YouTube Data API v3 (subscriptions.list). * FR5: [Data Acquisition - Channel Metadata] For each subscribed channel ID: * Fetch channel details using channels.list (part=snippet,statistics,topicDetails). Store/cache Title, Description, Thumbnail URL, Subscriber Count, Video Count, Topic Details. * Fetch the IDs of the 10 most recent public videos from the channel's primary uploads playlist using playlistItems.list (requires finding the uploads playlist ID via channels.list first). * FR6: [Data Acquisition - Video Metadata] For each of the 10 recent video IDs obtained in FR5, fetch video details using videos.list (part=snippet). Store/cache Video Title and Description. * FR7: [Data Caching] Implement aggressive caching for channel and video metadata (FR5, FR6) to minimize redundant API calls and manage quota usage. Define appropriate cache TTLs (e.g., 24 hours). * FR8: [Analysis Engine] Analyze the fetched text data (channel titles/descriptions, recent video titles/descriptions) using keyword/pattern matching based on internal lists for defined risk categories (see Sec 10). Assign flags/categories to channels where matches occur. Store analysis results. * FR9: [Risk Context] Incorporate channel statistics (subscriber count) and topic details (if available) as contextual information when presenting flagged channels – do not use for direct risk scoring in MVP. * FR10: [Dashboard UI] Provide a web-based (Flutter Web) parent dashboard displaying: * Linked child YouTube account(s). * A list of subscribed channels, sortable/filterable (e.g., by name, subscriber count, flag status). * Clear visual indicators (flags, badges) for channels flagged by the analysis engine. * Ability to view details for a flagged channel: Name, Thumbnail, Subscriber Count, Risk Category(ies) found, direct link to channel, potentially the triggering text snippet (TBD feasibility/UX). * Summary info: Total subscriptions scanned, number flagged, timestamp of last scan. * Indicator for newly flagged channels since last parent review. * FR11: [Notifications] Implement an optional notification system (e.g., daily summary email or in-app notification) informing the parent when a scan is complete and if new high-priority flags were found. No real-time alerts. * FR12: [Feedback Mechanism] Provide a button/mechanism for parents to mark a flagged channel as "Not Harmful". Log this feedback for manual review by the internal team. Optionally hide self-marked channels from the parent's primary view. * FR13: [Account Unlinking] Allow parents to easily and securely unlink a child's YouTube account, revoking stored tokens and stopping further monitoring for that account. * FR14: [Parent Onboarding/Guidance] Include in-app onboarding explaining functionality, limitations, and providing links/resources on interpreting results and talking to children about online safety.
5. Non-Functional Requirements
* 5.1. Security: (As per combined spec: E2E Encryption, Secure Token Storage, Vuln Scanning, RBAC, OWASP). Security testing is a key phase in the comprehensive testing plan (see [Comprehensive Testing Plan in Development Progress Documentation](../documentation/development-progress.md#comprehensive-testing-plan)).
* 5.2. Privacy: (As per combined spec: COPPA VPC <13, Parent+Child Consent >=13, Clear Policy, Minimization, Retention, Deletion, Anonymization where possible). Special attention to YouTube/Google data policies.
* 5.3. Performance: Dashboard load time < 3 seconds. Daily background scan completion target TBD based on quota/optimization results, but should not cause user-facing delays. API response times < 500ms (p95). Performance testing is included in the comprehensive testing plan.
* 5.4. Scalability: Architecture supports target users (e.g., 10k) and average/max subscriptions (500/2000). Plan for potential YouTube API quota limitations impacting effective scale.
* 5.5. Usability: Intuitive interface for non-technical parents. Clear explanations.
* 5.6. Reliability & Availability: Target 99.9% uptime. Robust handling of YouTube API errors, rate limits, and quota exhaustion. Monitoring and alerting for API issues. Reliability is addressed through the comprehensive testing plan.
* 5.7. Maintainability: Modular Flutter and backend codebases. Good documentation, automated tests are a core part of the comprehensive testing plan (see [Comprehensive Testing Plan in Development Progress Documentation](../documentation/development-progress.md#comprehensive-testing-plan)). Easy updates for analysis rules/keywords.
* 5.8. Compliance: Strict adherence to YouTube Data API ToS, Google API Services User Data Policy, COPPA, GDPR, and relevant AZ/US laws (requires legal review).
6. System Architecture * (Diagram placeholder - Assumes standard Frontend -> Backend API -> Database/Cache/Task Queue/Analysis Engine structure. SM Connectors interact only with YouTube Data API. No Companion App needed for MVP).
7. Tech Stack Recommendations
*   UI (Web/Mobile): Flutter + Dart (State Mgt: Bloc/Riverpod, Routing: GoRouter).
*   Backend API: Python + FastAPI (Primary Rec.).
*   Database: PostgreSQL + Redis.
*   Analysis Engine: Python (likely integrated within FastAPI backend for MVP, or separate microservice). Uses internal keyword lists, potentially spaCy/NLTK. Calls no external analysis APIs for MVP.
*   Task Queue: Celery + Redis.
*   API Comms: REST + OpenAPI.
*   Auth: JWT + Secure Storage (Flutter). Optional OAuth (Google/Apple) for parent login. Google Sign-In for child YouTube linking.
*   Notifications: FCM (via firebase_messaging) + Email Service (SES/SendGrid).
*   Deployment: Flutter Web (Static Hosting), Mobile Apps (Stores), Backend (Docker on K8s/PaaS), Managed DB/Cache.
*   **Testing:** A comprehensive, phased testing strategy is employed, including Unit, Integration, End-to-End, Performance, and Security testing. The detailed plan can be found in the [Comprehensive Testing Plan in Development Progress Documentation](../documentation/development-progress.md#comprehensive-testing-plan).
8. Data Model (Key Entities - Needs Detail) * ParentUser * ChildProfile * LinkedAccount (Platform=YouTube) * SubscribedChannel (Replaces FollowedAccount) * AnalyzedVideo (Stores metadata for recent videos) * AnalysisResult * Alert (Represents notification summary, not real-time) * AuditLog * (Further detail required for fields and relationships)
9. API Definitions (Internal - Needs Detail) * (Define endpoints for Auth, Profiles, YouTube Linking/Unlinking, Dashboard data, Feedback).
10. Content Analysis Module Details (MVP) * 10.1. Risk Categories (Initial Set): Hate Speech/Extreme Ideology, Self-Harm/Suicide Promotion, Graphic Violence, Explicit/Adult Content, Bullying Keywords, Dangerous Challenges Keywords, Misinformation Keywords (YouTube specific). * 10.2. Analysis Technique: Keyword/Pattern Matching ONLY on text (Channel Title/Desc, last 10 Video Titles/Desc). Use internally curated lists. Include simple emoji mapping. * 10.3. Scoring/Severity: No complex scoring. Flag channel if match found. Optionally assign simple severity (High/Medium) per category for prioritization. * 10.4. Context: Use Channel Stats (subs) and Topic Details for context on dashboard, not for scoring. * 10.5. Out of Scope (MVP): LLM analysis, URL analysis, Image/Video/Audio/Transcript analysis. Modularity for future LLM integration is desirable.
11. Ethical & Privacy Strategy * 11.1. Consent: Implement COPPA VPC (<13) and Parent Initiation + Verifiable Child Google OAuth Consent (>=13). Provide clear in-app explanations during flow. * 11.2. Data Handling: (As per combined spec: Minimization, Encryption, Secure Storage, Retention, Deletion). Specifically adhere to Google API Services User Data Policy. * 11.3. Transparency: Clear policies. Explain data usage to parent/child. Child has no ongoing app view in MVP. * 11.4. Compliance: Adhere to YouTube ToS, Google Policies, COPPA, GDPR, AZ Laws (requires legal review).
12. Limitations & Risks * 12.1. CRITICAL RISK - YouTube API Quotas: Default quotas are insufficient for scale. Aggressive caching, optimization, and securing a quota increase from Google are essential for viability. Service may be degraded or limited without it. * 12.2. API Changes/Reliability: YouTube API changes or outages can break functionality. Need robust monitoring and error handling. * 12.3. Analysis Accuracy: Keyword matching is limited. False positives and negatives will occur. Effectiveness depends heavily on keyword list quality/maintenance. Text-only analysis misses visual/audio context inherent to video. * 12.4. Circumvention: Children can use accounts not linked to the service. * 12.5. Ethical Misuse: Risk of tool being used for excessive control, damaging trust. * 12.6. Legal & Compliance: Complexity navigating laws and platform policies; requires ongoing effort and legal counsel.
13. Proposed Roadmap & Milestones (MVP - YouTube Only)
*   Sprint 0-1: Foundation & API Validation
    *   Setup Project, Dev Env, CI/CD. Finalize DB Schema.
    *   CRITICAL: Implement core YouTube API interactions. Validate quota usage. Design caching. Initiate Google API Quota Increase Request ASAP.
    *   Implement basic Parent Auth & Child Profile structure.
*   Sprint 2-3: Core Linking & Data Fetching
    *   Implement YouTube Account Linking via Google OAuth. Secure token handling.
    *   Build background task system (Celery/Redis) to fetch required metadata. Populate DB. Implement caching.
*   Sprint 4-5: Analysis Engine & Basic Dashboard
    *   Develop initial keyword lists/patterns.
    *   Build Analysis Engine service/module. Assign flags.
    *   Build basic Flutter dashboard (Web): Display list + basic flags.
*   Sprint 6-7: Dashboard Refinement & Context
    *   Enhance dashboard: Thumbnails, sub counts, links, context for flags. Sorting/filtering. "Newly Flagged" indicator.
    *   Implement "Mark as Not Harmful" feedback mechanism.
*   Sprint 8-9: Polish, Onboarding & Notifications
    *   Develop Parent Onboarding flow and In-App Guidance content.
    *   Implement simple notification system (scan complete email/push).
    *   UI Polish, bug fixing.
*   Sprint 10-11: Compliance, Testing & Beta Prep
    *   Implement COPPA VPC / Consent flows thoroughly.
    *   Conduct Security testing and review as per the comprehensive testing plan. Final privacy/legal review.
    *   Perform End-to-end testing as outlined in the comprehensive testing plan. Deployment to staging.
    *   Prepare for closed beta.

14. Next Steps (Immediate Actions)
*   Initiate YouTube Data API Quota Increase Request.
*   Perform detailed technical spike/PoC on fetching and caching required YouTube data within expected quota limits.
*   Obtain AZ-specific legal review regarding consent, data privacy, and minors.
*   Finalize the MVP keyword lists for risk categories.
*   Begin detailed design of the Flutter dashboard UI/UX.
*   Continue implementing the comprehensive testing plan, focusing on Unit and Integration tests.
